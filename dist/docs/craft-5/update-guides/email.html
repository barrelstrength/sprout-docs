<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Updating Email - Sprout Plugins – Craft CMS</title>
    <meta name="description" content="Sprout Email update guide.">
    <meta name="generator" content="VitePress v1.2.3">
    <link rel="preload stylesheet" href="/docs/craft-v5/assets/style.CMisN2ZT.css" as="style">
    
    <script type="module" src="/docs/craft-v5/assets/app.DuMXIVKA.js"></script>
    <link rel="preload" href="/docs/craft-v5/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/docs/craft-v5/assets/chunks/framework.Cd8PatJh.js">
    <link rel="modulepreload" href="/docs/craft-v5/assets/chunks/theme.DvxI1VXn.js">
    <link rel="modulepreload" href="/docs/craft-v5/assets/update-guides_email.md.Bn5hLimN.lean.js">
    <link rel="icon" href="/docs/craft-v5/icons/favicon.ico">
    <link rel="icon" href="/docs/craft-v5/icons/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/docs/craft-v5/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/docs/craft-v5/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/docs/craft-v5/icons/favicon-16x16.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar top" data-v-ae24b3ad data-v-ccf7ddec><div class="wrapper" data-v-ccf7ddec><div class="container" data-v-ccf7ddec><div class="title" data-v-ccf7ddec><div class="VPNavBarTitle has-sidebar" data-v-ccf7ddec data-v-ab179fa1><a class="title" href="/docs/craft-v5/" data-v-ab179fa1><!--[--><!--]--><!--[--><img class="VPImage logo" src="/docs/craft-v5/logo.svg" alt data-v-8426fc1a><!--]--><span data-v-ab179fa1>Sprout</span><!--[--><!--]--></a></div></div><div class="content" data-v-ccf7ddec><div class="content-body" data-v-ccf7ddec><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ccf7ddec><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ccf7ddec data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/craft-v5/support/support.html" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>Support</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>Sprout v5</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>Documentation</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/docs/craft-v5/" data-v-43f1e123><!--[-->Sprout v5 (Craft 5)<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link vp-external-link-icon" href="https://sprout.barrelstrengthdesign.com/docs/craft-v4/" target="_blank" rel="noreferrer" data-v-43f1e123><!--[-->Sprout v4 (Craft 4)<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link vp-external-link-icon" href="https://sprout.barrelstrengthdesign.com/docs/craft-v3/" target="_blank" rel="noreferrer" data-v-43f1e123><!--[-->Sprout v3 (Craft 3)<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link vp-external-link-icon" href="https://sprout.barrelstrengthdesign.com/docs/craft-v2/" target="_blank" rel="noreferrer" data-v-43f1e123><!--[-->Sprout v2 (Craft 2)<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>Plugin Store</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link vp-external-link-icon" href="https://plugins.craftcms.com/developer/barrel-strength-design?craft5" target="_blank" rel="noreferrer" data-v-43f1e123><!--[-->Craft 5<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link vp-external-link-icon" href="https://plugins.craftcms.com/developer/barrel-strength-design?craft4" target="_blank" rel="noreferrer" data-v-43f1e123><!--[-->Craft 4<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link vp-external-link-icon" href="https://plugins.craftcms.com/developer/barrel-strength-design?craft3" target="_blank" rel="noreferrer" data-v-43f1e123><!--[-->Craft 3<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ccf7ddec data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ccf7ddec data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/barrelstrength/sprout" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ccf7ddec data-v-d0bd9dde data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d0bd9dde><div class="item social-links" data-v-d0bd9dde><div class="VPSocialLinks social-links-list" data-v-d0bd9dde data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/barrelstrength/sprout" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ccf7ddec data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-ccf7ddec><div class="divider-line" data-v-ccf7ddec></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-575e6a36><div class="curtain" data-v-575e6a36></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-575e6a36><span class="visually-hidden" id="sidebar-aria-label" data-v-575e6a36> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-b8d55f3b><!----><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="../" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>← All Sprout Modules</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><h2 class="text" data-v-b8d55f3b>Update Guides</h2><!----></div><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/docs/craft-v5/update-guides/index.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Updating Sprout</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/docs/craft-v5/update-guides/sprout.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Upgrading from Craft 4</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _docs_craft-v5_update-guides_email" data-v-39a288b8><div><h1 id="updating-email" tabindex="-1">Updating Email <a class="header-anchor" href="#updating-email" aria-label="Permalink to &quot;Updating Email&quot;">​</a></h1><h2 id="v4-44-444-september-5-2023" tabindex="-1">v4.44.444 - September 5, 2023 <a class="header-anchor" href="#v4-44-444-september-5-2023" aria-label="Permalink to &quot;v4.44.444 - September 5, 2023&quot;">​</a></h2><p>The Transactional Email Module manages Sprout&#39;s core notification email functionality and in this major release adds significant features such as Audiences, Email Types, and the Notification Event Condition Builder.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Please reach out and request a <a href="./../support/training.html">coaching session</a> if you have any questions about how to use these new features or deal with any parts of the manual migration.</p></div><h3 id="breaking-changes" tabindex="-1">Breaking Changes <a class="header-anchor" href="#breaking-changes" aria-label="Permalink to &quot;Breaking Changes&quot;">​</a></h3><p>This release includes a number of potentially breaking changes including configuring email permissions using Email Types; using the new Notification Event Condition Builder to define event rules; and more flexible handling of custom variables in your email templates.</p><p>Review the following notes carefully as you may need to take manual steps after updating to ensure your emails are configured as intended.</p><h3 id="email-types" tabindex="-1">Email Types <a class="header-anchor" href="#email-types" aria-label="Permalink to &quot;Email Types&quot;">​</a></h3><p>Email Templates have been refactored into Email Types, giving you the ability to customize your email workflows in much greater detail. When a new email is created, a content author must now select which Email Type they wish to create.</p><p>Beyond email templates, Email Types can also be configured with custom fields, field layouts, and mailer settings.</p><h4 id="review-all-migrated-email-types" tabindex="-1">Review all migrated Email Types <a class="header-anchor" href="#review-all-migrated-email-types" aria-label="Permalink to &quot;Review all migrated Email Types&quot;">​</a></h4><p>In Craft 3, Email Template settings only stored the template path of the email template for a given email and these paths could be managed in two places:</p><ol><li>Globally</li><li>On an per-email basis</li></ol><p>In Craft 4, Email Types are more advanced so, in some cases, settings for the Email Types created in the migration use default settings. Also, things like the Email Type name may not end up being too user friendly as they are based on the template path (i.e. &quot;<em>Custom Templates _email/path</em>&quot;). In the migration, each unique combination of From Name, From Email, and Email Template found creates a new Email Type.</p><p>After the migration, we recommend reviewing all Email Type settings to ensure they match your needs.</p><h3 id="mailers" tabindex="-1">Mailers <a class="header-anchor" href="#mailers" aria-label="Permalink to &quot;Mailers&quot;">​</a></h3><p>Mailers now allow users to customize Sender and Reply To settings and manage the Mailers tab field layout. Mailer Settings are assigned to Email Types and this facilitates managing permissions between Email Type and Sender requirements.</p><h4 id="review-all-migrated-mailer-settings" tabindex="-1">Review all migrated Mailer Settings <a class="header-anchor" href="#review-all-migrated-mailer-settings" aria-label="Permalink to &quot;Review all migrated Mailer Settings&quot;">​</a></h4><p>In Craft 3, any author could use Environment variables in the From Name, From Email, and Reply-To fields when creating an email.</p><p>In Craft 4, environment variables can only be used in Mailer Settings editable by the admin and the parsed values will populate the settings available to the email author when editing an email. Mailer Settings values are validated against the approved Sender addresses before sending.</p><p>Three different settings configurations are available:</p><ul><li>Craft Mail Settings</li><li>Editable Defaults</li><li>Approved Sender List</li></ul><p>In the migration, we check if you&#39;ve used environment variables in your email settings. If so, and if those settings match the Craft default settings, we set your default Mailer to the Craft Mailer Settings option. If they don&#39;t match, we migrate them to the Editable Defaults option.</p><h3 id="notification-event-condition-builder" tabindex="-1">Notification Event Condition Builder <a class="header-anchor" href="#notification-event-condition-builder" aria-label="Permalink to &quot;Notification Event Condition Builder&quot;">​</a></h3><p>Notification Events have been refactored to use Craft&#39;s powerful and extensible Condition Builder. Authors can now manage notifications using Craft&#39;s familiar condition builder UI, the same UI used for conditional field logic and customizing element sources.</p><p>We recommend you review all Notification Event settings and test your notifications after upgrade.</p><p>While we&#39;ve tried to migrate all settings correctly, there were a few instances (noted below) where we had to make a judgement call, and the Condition Builder can now handle much more advanced use cases with Drafts, Revisions, and Sites logic and you should test and and confirm your Transactional email are being sent as intended.</p><p>Below we review a few situations where you may need to manually update your settings:</p><h3 id="site-ids-drafts-and-revisions-are-better-supported" tabindex="-1">Site IDs, Drafts, and Revisions are better supported <a class="header-anchor" href="#site-ids-drafts-and-revisions-are-better-supported" aria-label="Permalink to &quot;Site IDs, Drafts, and Revisions are better supported&quot;">​</a></h3><p>In Craft 3, Notification Events needed to provide their own settings to have an opinion on Sites, Drafts, and Revisions</p><p>In Craft 4, the Condition Builder defaults to assuming you want to send emails for ALL sites and all scenarios when an Element is being triggered, including Drafts and Revisions.</p><p>The default events handle some of these scenario. For example, the new &quot;When an entry is created&quot; event assumes you only want to trigger an email when a canonical entry is saved and not when it&#39;s drafts or revision are saved. It also assumes you only want to trigger a notification once, watching <code>Element::EVENT_AFTER_PROPAGATE</code>. However, if you have a custom event that watches <code>Element::EVENT_AFTER_SAVE</code>, the event may not trigger multiple times unless you restrict it to a single site or update the Event it&#39;s watching to ensure it only triggers once during the save request.</p><h4 id="when-new-and-when-updated-element-events-are-now-separate" tabindex="-1">When New and When Updated Element Events are now separate <a class="header-anchor" href="#when-new-and-when-updated-element-events-are-now-separate" aria-label="Permalink to &quot;When New and When Updated Element Events are now separate&quot;">​</a></h4><p>In Craft 3, the &quot;When an Entry is Saved&quot; Notification Event allowed you to select if the notification was sent &quot;When New&quot;, &quot;When Updated&quot;, or both.</p><p>In Craft 4, this single event has become two events: &quot;When an entry is created&quot; and &quot;When an entry is updated&quot;. In the case you had a Transactional Email that had both &quot;When New&quot; and &quot;When updated&quot; selected, you will now need to create a second Transactional Email to trigger an email for both scenarios.</p><p>The same is true for the &quot;When a user is saved&quot; Notification Event. If you have a Transactional Email with both the &quot;When New&quot; and &quot;When Updated&quot; scenarios selected, only one will get migrated and you&#39;ll have to create the second email manually after the migration.</p><h4 id="on-save-user-event-handles-admin-users-differently" tabindex="-1">On Save User Event handles Admin users differently <a class="header-anchor" href="#on-save-user-event-handles-admin-users-differently" aria-label="Permalink to &quot;On Save User Event handles Admin users differently&quot;">​</a></h4><p>In Craft 3, the &quot;When a user is saved&quot; Notification Event allowed you to select if you wanted to include &quot;Admins&quot; as a User Group. Admins are not a default User Group in Craft and with the new Condition Builder must be handled separately.</p><p>If your Transactional Email was only being sent to Admins, we can migrate that correctly. Or if it was only sent to User Groups, that should be migrated correctly as well. But if you had both checked, you&#39;ll need to manually create a new Transactional Email to handle the Admins use case after the migration.</p><h4 id="send-method-is-retired-all-emails-will-be-sent-as-lists" tabindex="-1">Send Method is retired. All emails will be sent as Lists. <a class="header-anchor" href="#send-method-is-retired-all-emails-will-be-sent-as-lists" aria-label="Permalink to &quot;Send Method is retired. All emails will be sent as Lists.&quot;">​</a></h4><p>In Craft 3, you could select the &quot;Send Method&quot; for an email, which gave you the option to send emails to each person on the list individually, or to alternatively send a single email to everyone.</p><p>In Craft 4, we&#39;ve retired this setting and all emails will be sent to each person on the list individually.</p><h4 id="send-rules-have-been-migrated-to-use-twig-expression-condition-rule" tabindex="-1">Send Rules have been migrated to use Twig Expression Condition Rule <a class="header-anchor" href="#send-rules-have-been-migrated-to-use-twig-expression-condition-rule" aria-label="Permalink to &quot;Send Rules have been migrated to use Twig Expression Condition Rule&quot;">​</a></h4><p>In Craft 3, the &quot;Send Rule&quot; setting allowed you to use a Twig Expression to limit when your email was sent to only when the event triggered matched your Twig Expression.</p><p>In Craft 4, this setting has been moved and is now available as the &quot;Twig Expression&quot; Condition Rule in the Condition Builder.</p><p><em>Note: The Twig Expression Condition Rule is also available wherever you see the Condition Builder in Craft, however it can only be used for Element Match behavior, such as with Conditional Field Layout Logic, and it will not work to modify an Element Query, such as with Element Sources and Search filtering. We&#39;ve reached out to Craft with a feature request to help us limit where this appears to only the Condition Builder scenarios where it works.</em></p><h3 id="custom-notification-events" tabindex="-1">Custom Notification Events <a class="header-anchor" href="#custom-notification-events" aria-label="Permalink to &quot;Custom Notification Events&quot;">​</a></h3><p>Custom Notification Events will need to be updated. See the base class <code>BarrelStrength\Sprout\transactional\notificationevents\NotificationEvent</code> for details and review the Sprout Notification Events for examples under <code>BarrelStrength\Sprout\transactional\components\notificationevents\...</code></p><p>A few things you&#39;ll need to update:</p><p>Event Object method can now return any variables they want instead of just an <code>object</code> variable:</p><ul><li><code>NotificationEvent::getEventObject()</code> =&gt; <code>NotificationEvent::getEventVariables()</code></li><li><code>NotificationEvent::getMockEventObject()</code> =&gt; <code>NotificationEvent::getMockEventVariables()</code></li></ul><p>Element-based Notification Events can lean on two helper classes to implement the Condition Builder:</p><ul><li><code>BarrelStrength\Sprout\transactional\notificationevents\ElementEventInterface</code></li><li><code>BarrelStrength\Sprout\transactional\notificationevents\ElementEventTrait</code></li></ul><p>Any conditional logic that the Condition Builder can&#39;t handle should probably take place in the <code>NotificationEvent::matchNotificationEvent()</code> method. If this logic takes precedence over any other Condition Builder rules, you can hide rules you don&#39;t want to appear by implementing <code>ElementEventInterface::getExclusiveQueryParams()</code>.</p><p>Reach out if you have any additional questions. A lot has changed here and these features are now leaning on a lot of more recent Craft 4 functionality that isn&#39;t widely documented.</p><h4 id="mailer-settings-columns-have-been-changed-to-a-json-column" tabindex="-1">Mailer settings columns have been changed to a JSON column <a class="header-anchor" href="#mailer-settings-columns-have-been-changed-to-a-json-column" aria-label="Permalink to &quot;Mailer settings columns have been changed to a JSON column&quot;">​</a></h4><p>Any custom email queries that touch these fields will need to now target the JSON blob stored in the <code>sprout_email.mailerInstructionsSettings</code> column:</p><ul><li><code>sprout_email.fromName</code> =&gt; <code>sprout_email.mailerInstructionsSettings.fromName</code></li><li><code>sprout_email.fromEmail</code> =&gt; <code>sprout_email.mailerInstructionsSettings.fromEmail</code></li><li><code>sprout_email.replyToEmail</code> =&gt; <code>sprout_email.mailerInstructionsSettings.replyToEmail</code></li><li><code>sprout_email.recipients</code> =&gt; <code>sprout_email.mailerInstructionsSettings.recipients</code></li></ul><h3 id="audiences" tabindex="-1">Audiences <a class="header-anchor" href="#audiences" aria-label="Permalink to &quot;Audiences&quot;">​</a></h3><p>Sprout Lists has been retired as a general list management plugin and Subscriber and Mailing List specific features have been rolled into Sprout&#39;s Mailer module. The Audience Element along with it&#39;s Audience Type establish the ruleset around how a given Audience is defined and managed.</p><h4 id="subscribers-are-now-craft-users" tabindex="-1">Subscribers are now Craft Users <a class="header-anchor" href="#subscribers-are-now-craft-users" aria-label="Permalink to &quot;Subscribers are now Craft Users&quot;">​</a></h4><p>In Craft 3, the Sprout Lists Subscriber list included a Subscriber Element and allowed you to sync Subscribers with the Craft User Element.</p><p>In Craft 4, the Subscriber Element has been retired and Subscribers now default to non-credentialed Craft Users. Enabling the Subscriber List Audience Type adds layer on top of Craft Users which includes a Subscriber Lists field, Subscriber List Audience Type, and Subscriber List sources in the sources sidebar of the Users Element Index page.</p><p>The only lists that will be migrated into Audiences are User Lists, where the Element ID referenced is a <code>craft\elements\User</code>. Any other uses of Lists need to be manually migrated. See the next section for some additional thoughts.</p><p>Subscriber Lists now support settings around which User Statuses will trigger emails so be sure to review any Subscriber Lists and make sure that the settings fit your needs.</p><h4 id="use-the-data-set-audience-type-for-unconventional-uses-of-lists" tabindex="-1">Use the Data Set Audience Type for unconventional uses of Lists <a class="header-anchor" href="#use-the-data-set-audience-type-for-unconventional-uses-of-lists" aria-label="Permalink to &quot;Use the Data Set Audience Type for unconventional uses of Lists&quot;">​</a></h4><p>As of the initial release, there is no upgrade path for migrating non-User Element Lists so you&#39;ll want to prepare a migration of any data in this category ahead of upgrading to Sprout.</p><p>The Sprout Lists plugin was a general purpose list plugin and allowed too much flexibility in allowing any Element to be defined as a List, often creating the potential for redundant data in place of just using a custom query and creating too many edge cases to support.</p><p>Sprout, moving forward will only be handling Mailing List use cases so any other lists should probably find a different upgrade path. Data Studio may provide you additional ways to query data that can be used in list-like ways.</p><p>The recommended approach for non-standard User-focused lists is to create a Custom Query Data Set that defines a query to retrieve the relevant data from your old list tables and use that to create a new Audience using the Data Set Audience Type. The Data Set Audience Type integration with Sprout&#39;s Data Studio module gives you the ability to create Audiences from custom queries, from wherever you manage your data.</p><p>For any front-end code allowing users to subscribe or unsubscribe from lists, see the new <a href="./../audiences.html">Audiences</a> documentation for details on how to update your Twig code.</p><h3 id="framework" tabindex="-1">Framework <a class="header-anchor" href="#framework" aria-label="Permalink to &quot;Framework&quot;">​</a></h3><ul><li>See the general <a href="./../update-guides/sprout.html">upgrade guide</a> for Sprout Modules to 4.0</li></ul></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-d4a0bba5><!--[--><!--]--><div class="edit-info" data-v-d4a0bba5><div class="edit-link" data-v-d4a0bba5><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/barrelstrength/sprout-docs/edit/craft-v5/docs/update-guides/email.md" target="_blank" rel="noreferrer" data-v-d4a0bba5><!--[--><span class="vpi-square-pen edit-link-icon" data-v-d4a0bba5></span> Edit this page<!--]--></a></div><div class="last-updated" data-v-d4a0bba5><p class="VPLastUpdated" data-v-d4a0bba5 data-v-7e05ebdb>Last Updated: : <time datetime="2025-09-10T02:46:11.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-d4a0bba5><span class="visually-hidden" id="doc-footer-aria-label" data-v-d4a0bba5>Pager</span><div class="pager" data-v-d4a0bba5><!----></div><div class="pager" data-v-d4a0bba5><a class="VPLink link pager-link next" href="../" data-v-d4a0bba5><!--[--><span class="desc" data-v-d4a0bba5>Next page</span><span class="title" data-v-d4a0bba5>← All Sprout Modules</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Craft The Planet</p><p class="copyright" data-v-e315a0ad>© Barrel Strength Design</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"examples-email_welcome-notification.md\":\"2rfmK4cN\",\"examples-seo_block-robots-on-dev-site.md\":\"ywY-MwJi\",\"examples-seo_elements-without-urls.md\":\"CTKiGouf\",\"examples-email_craft-globals.md\":\"BDiaUA2D\",\"examples-data-studio_faq.md\":\"I0gZhXDA\",\"examples-seo_faq.md\":\"Da7f1_8R\",\"configuration_requirements.md\":\"CcFyUXJb\",\"examples-seo_redirect-workflows.md\":\"DaEC1Bsc\",\"redirects.md\":\"BZYL7znm\",\"examples-email_faq.md\":\"D9x9DgBj\",\"transactional-email.md\":\"B1i1jhxZ\",\"audiences.md\":\"Bre4uP7u\",\"data-studio.md\":\"BOTEBh73\",\"examples-data-studio_sql-queries.md\":\"ChaDTxia\",\"support_training.md\":\"Bq0Q6hPw\",\"support_support.md\":\"GZ_2Y1l-\",\"email-types.md\":\"B5xZvmn3\",\"support_contributing.md\":\"BzoGGBV-\",\"configuration_twig-shortcut-syntax.md\":\"DZU8YGDy\",\"examples-seo_template-metadata-overrides.md\":\"B65zYFfl\",\"examples-seo_element-metadata-field.md\":\"BDP-ztTk\",\"meta.md\":\"CxYe4qn3\",\"mailers.md\":\"DURYghwP\",\"configuration_sprout-config.md\":\"BatwpPwB\",\"update-guides_forms.md\":\"CjN7O1lq\",\"update-guides_sitemaps.md\":\"BetS0yyS\",\"support_coding-guidelines.md\":\"LsGY3oZj\",\"update-guides_sprout.md\":\"CLOBFsqV\",\"support_security.md\":\"BvZZMoyk\",\"examples-data-studio_large-data-sets.md\":\"CvGCapA8\",\"examples-data-studio_html-vs-csv.md\":\"8OtQhesb\",\"examples-data-studio_name-format.md\":\"C-Pv4DXn\",\"examples-seo_canonical-urls.md\":\"BIgF0fS2\",\"update-guides_index.md\":\"C3C6P4CK\",\"update-guides_seo.md\":\"Dbg78dgT\",\"support_pricing.md\":\"CLSLAlaT\",\"update-guides_email.md\":\"Bn5hLimN\",\"sitemaps.md\":\"0DBZsk7F\",\"index.md\":\"D5lFmcUa\",\"update-guides_redirects.md\":\"45lHpPX8\",\"support_road-map.md\":\"EiNqS1hz\",\"examples-seo_global-metadata-in-templates.md\":\"Dk8sfIwu\",\"update-guides_data-studio.md\":\"_dyo29_m\",\"sent-email.md\":\"BQllxduA\",\"examples-seo_query-strings-in-redirects.md\":\"tdPf7stQ\",\"features.md\":\"Cmm4Q4yI\",\"examples-data-studio_custom-twig-template-report.md\":\"CutuWRoY\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Sprout\",\"titleTemplate\":\":title - Sprout Plugins – Craft CMS\",\"description\":\"Build custom Craft CMS websites with Sprout Marketing Suite\",\"base\":\"/docs/craft-v5/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.svg\",\"nav\":[{\"text\":\"Support\",\"link\":\"/support/support\",\"activeMatch\":\"/support/\"},{\"text\":\"Sprout v5\",\"items\":[{\"text\":\"Documentation\",\"items\":[{\"text\":\"Sprout v5 (Craft 5)\",\"link\":\"/\"},{\"text\":\"Sprout v4 (Craft 4)\",\"link\":\"https://sprout.barrelstrengthdesign.com/docs/craft-v4/\"},{\"text\":\"Sprout v3 (Craft 3)\",\"link\":\"https://sprout.barrelstrengthdesign.com/docs/craft-v3/\"},{\"text\":\"Sprout v2 (Craft 2)\",\"link\":\"https://sprout.barrelstrengthdesign.com/docs/craft-v2/\"}]},{\"text\":\"Plugin Store\",\"items\":[{\"text\":\"Craft 5\",\"link\":\"https://plugins.craftcms.com/developer/barrel-strength-design?craft5\"},{\"text\":\"Craft 4\",\"link\":\"https://plugins.craftcms.com/developer/barrel-strength-design?craft4\"},{\"text\":\"Craft 3\",\"link\":\"https://plugins.craftcms.com/developer/barrel-strength-design?craft3\"}]}]}],\"sidebar\":{\"/\":[{\"text\":\"Overview\",\"items\":[{\"text\":\"About Sprout\",\"link\":\"/index\"},{\"text\":\"Lite vs Pro\",\"link\":\"/features\"}]},{\"text\":\"Configuration\",\"collapsed\":false,\"items\":[{\"text\":\"Update Guides\",\"link\":\"/update-guides/index\"},{\"text\":\"Requirements\",\"link\":\"/configuration/requirements\"},{\"text\":\"Config Settings\",\"link\":\"/configuration/sprout-config\"},{\"text\":\"Shortcut Syntax\",\"link\":\"/configuration/twig-shortcut-syntax\"}]},{\"text\":\"Data Management\",\"collapsed\":false,\"items\":[{\"text\":\"Data Studio\",\"link\":\"/data-studio\"},{\"text\":\"FAQ & Examples\",\"link\":\"/examples-data-studio/custom-twig-template-report\"}]},{\"text\":\"SEO Metadata\",\"collapsed\":false,\"items\":[{\"text\":\"Meta Tags & Schema\",\"link\":\"/meta\"},{\"text\":\"Redirects\",\"link\":\"/redirects\"},{\"text\":\"Sitemaps\",\"link\":\"/sitemaps\"},{\"text\":\"FAQ & Examples\",\"link\":\"/examples-seo/faq\"}]}],\"/support/\":[{\"text\":\"Support & Training\",\"items\":[{\"text\":\"Support\",\"link\":\"/support/support\"},{\"text\":\"Training\",\"link\":\"/support/training\"}]},{\"text\":\"Policies\",\"items\":[{\"text\":\"Contributing\",\"link\":\"/support/contributing\"},{\"text\":\"Pricing\",\"link\":\"/support/pricing\"},{\"text\":\"Security\",\"link\":\"/support/security\"}]},{\"text\":\"Dreams of the Future\",\"items\":[{\"text\":\"Road Map\",\"link\":\"/support/road-map\"}]}],\"/update-guides/\":[{\"items\":[{\"text\":\"← All Sprout Modules\",\"link\":\"../\"}]},{\"text\":\"Update Guides\",\"items\":[{\"text\":\"Updating Sprout\",\"link\":\"/update-guides/index\"},{\"text\":\"Upgrading from Craft 4\",\"link\":\"/update-guides/sprout\"}]}],\"/examples-data-studio/\":[{\"items\":[{\"text\":\"← Back to Data Studio\",\"link\":\"/data-studio\"}]},{\"text\":\"Custom Queries\",\"items\":[{\"text\":\"Custom Twig Queries\",\"link\":\"/examples-data-studio/custom-twig-template-report\"},{\"text\":\"Custom SQL Queries\",\"link\":\"/examples-data-studio/sql-queries\"}]},{\"text\":\"Wrangling Data\",\"items\":[{\"text\":\"Large Data Sets\",\"link\":\"/examples-data-studio/large-data-sets\"},{\"text\":\"HTML vs CSV\",\"link\":\"/examples-data-studio/html-vs-csv\"},{\"text\":\"Name Format\",\"link\":\"/examples-data-studio/name-format\"}]}],\"/examples-email/\":[{\"items\":[{\"text\":\"← Back to Email\",\"link\":\"/transactional-email\"}]},{\"text\":\"Examples\",\"items\":[{\"text\":\"Troubleshooting FAQ\",\"link\":\"/examples-email/faq\"},{\"text\":\"Craft Globals\",\"link\":\"/examples-email/craft-globals\"},{\"text\":\"Welcome Notification\",\"link\":\"/examples-email/welcome-notification\"}]}],\"/examples-seo/\":[{\"items\":[{\"text\":\"← Back to SEO\",\"link\":\"/meta\"}]},{\"text\":\"Redirects\",\"items\":[{\"text\":\"Craft Globals\",\"link\":\"/examples-seo/query-strings-in-redirects\"},{\"text\":\"Redirect Workflows\",\"link\":\"/examples-seo/redirect-workflows\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/barrelstrength/sprout\"}],\"editLink\":{\"pattern\":\"https://github.com/barrelstrength/sprout-docs/edit/craft-v5/docs/:path\"},\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"5JN8FB8K6H\",\"apiKey\":\"dd083376e0d88465dfd6fe7f8c1ef13f\",\"indexName\":\"sprout_barrelstrengthdesign_v5\"}},\"footer\":{\"message\":\"Craft The Planet\",\"copyright\":\"© Barrel Strength Design\"},\"lastUpdated\":{\"text\":\"Last Updated: \"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>