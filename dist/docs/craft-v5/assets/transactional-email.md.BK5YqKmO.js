import{_ as s,c as a,o as i,a4 as e}from"./chunks/framework.Cd8PatJh.js";const m=JSON.parse('{"title":"About Transactional Email","description":"Sprout Email adds a centralized way to manage transactional email in Craft.","frontmatter":{"date":"2023-07-30T00:00:00.000Z","description":"Sprout Email adds a centralized way to manage transactional email in Craft."},"headers":[],"relativePath":"transactional-email.md","filePath":"transactional-email.md","lastUpdated":1757472724000}'),n={name:"transactional-email.md"},t=e(`<h1 id="about-transactional-email" tabindex="-1">About Transactional Email <a class="header-anchor" href="#about-transactional-email" aria-label="Permalink to &quot;About Transactional Email&quot;">​</a></h1><p>Sprout Email adds a centralized way to manage transactional email in Craft. Transactional Emails support Notification Events, customizable Email Types, and the ability to send to dynamic Mailing Lists using Audiences for list management.</p><p>See the related documentation pages for further detail:</p><ul><li><a href="./audiences.html">Audiences</a></li><li><a href="./email-types.html">Email Types</a></li><li><a href="./mailers.html">Mailer Settings</a></li><li><a href="./sent-email.html">Sent Emails</a></li></ul><p>When you first install Sprout, you&#39;ll want to review your Email Type and Mailer Settings to ensure they match the needs for your email author workflows.</p><h2 id="email-elements" tabindex="-1">Email Elements <a class="header-anchor" href="#email-elements" aria-label="Permalink to &quot;Email Elements&quot;">​</a></h2><p>Transactional Email Elements unify several email marketing and tooling concepts into a single element.</p><ul><li><strong>Email Metadata</strong> - Subject Line, Preheader Text</li><li><strong>Mailer Settings</strong> - Sender, Reply To, Recipients</li><li><strong>Delivery Instructions</strong> - Notification Event, Send Rules, File Attachments</li><li><strong>Content</strong> - Email Type, Custom Fields, Field Layout, Templates</li></ul><h2 id="notification-events" tabindex="-1">Notification Events <a class="header-anchor" href="#notification-events" aria-label="Permalink to &quot;Notification Events&quot;">​</a></h2><p>Notification Events give you the power to trigger transactional email exactly when you need it. Sprout provides several Notification Events to assist with common scenarios such as when an entry is saved or when a user is created.</p><h2 id="condition-builder" tabindex="-1">Condition Builder <a class="header-anchor" href="#condition-builder" aria-label="Permalink to &quot;Condition Builder&quot;">​</a></h2><p>Element-specific Notification Events allow you to use Craft&#39;s Condition Builder and Sprout provides several Condition Rules to help with fine-tune the conditions around when your Element events are triggered.</p><p>The Condition Builder gives you a lot of control over when your emails are triggered but also requires you take some time to understand how Elements are saved. It can easily feel like there are a lot of scenarios to be aware of.</p><h3 id="multi-site" tabindex="-1">Multi-site <a class="header-anchor" href="#multi-site" aria-label="Permalink to &quot;Multi-site&quot;">​</a></h3><p>Use the <code>Site</code> Condition Rule to ensure your emails are triggered on the correct site(s).</p><h3 id="twig-expression" tabindex="-1">Twig Expression <a class="header-anchor" href="#twig-expression" aria-label="Permalink to &quot;Twig Expression&quot;">​</a></h3><p>The <code>Twig Expression</code> Condition Rule is a flexible way to add custom logic without writing a custom event. The Element that triggers the event is available as the <code>object</code> variable.</p><p>A simple rule could use a Twig Expression like so:</p><div class="language-twig vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">twig</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{% </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> object.customField </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> %}true{% </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> %}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>More advanced rules can use an <code>include</code> to keep the CP setting simple:</p><div class="language-twig vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">twig</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{# Twig Expression Condition Rule value #}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{% </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;_notificationevents/twig-expression-rule.twig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> %}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{# Template: _notificationevents/twig-expression-rule.twig #}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{% </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> object.customField </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> %}true{% </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> %}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>See the doc page on <a href="./configuration/twig-shortcut-syntax.html">Twig Shortcut Syntax</a> for more information.</p><h2 id="personalization" tabindex="-1">Personalization <a class="header-anchor" href="#personalization" aria-label="Permalink to &quot;Personalization&quot;">​</a></h2><p>Personalizing email communications can take place at several points in the email workflow. For example, when an Entry is saved you might want to know who the author was and where you can view the entry; when a form is submitted you may want to trigger a message to an email address provided in the form; and when a product is purchased you might want to include purchase details in confirmation message.</p><p>Personalization happens in phases and uses two different syntaxes. Fields that support personalization in the Control Panel are processed as object templates and can use <a href="./configuration/twig-shortcut-syntax.html">Twig Shortcut Syntax</a>. Email templates are processed as standard Twig.</p><h3 id="when-a-notification-event-is-triggered" tabindex="-1">When a Notification Event is triggered <a class="header-anchor" href="#when-a-notification-event-is-triggered" aria-label="Permalink to &quot;When a Notification Event is triggered&quot;">​</a></h3><p>Each Notification Event defines <strong>Notification Event Variables</strong> that are available at the time the event is triggered. Entry events share the <code>entry</code> variable. User events share the <code>user</code> variable. But events are not limited to sharing just a single variable. Look in the right sidebar of the Control Panel when selecting an Event to see examples of which variables are available.</p><h3 id="define-recipients-using-event-data" tabindex="-1">Define recipients using event data <a class="header-anchor" href="#define-recipients-using-event-data" aria-label="Permalink to &quot;Define recipients using event data&quot;">​</a></h3><p><em>Recipients</em> can be set on the fly from data provided by the <strong>Notification Event Variables</strong>. For example, if your Form has an email field, you might set your recipient as:</p><div class="language-twig vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">twig</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{# Shortcut syntax #}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{submission.email}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{# Full syntax #}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ object.submission.email }}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="fields-that-allow-personalization" tabindex="-1">Fields that allow personalization <a class="header-anchor" href="#fields-that-allow-personalization" aria-label="Permalink to &quot;Fields that allow personalization&quot;">​</a></h3><p>The <em>Subject Line</em>, <em>Preheader Text</em>, <em>Default Message</em> also allow Twig Shortcut Syntax and can reference <strong>Notification Event Variables</strong> and <strong>Recipient Variables</strong> such as <code>{recipient.name}</code> and <code>{recipient.email}</code>.</p><h3 id="customizing-email-templates" tabindex="-1">Customizing Email Templates <a class="header-anchor" href="#customizing-email-templates" aria-label="Permalink to &quot;Customizing Email Templates&quot;">​</a></h3><p>The Notification Event, Recipient, and Email Element variables are all available for use in your email templates.</p><div class="language-twig vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">twig</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{# Email Element Fields</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">------------------------------------------------------------ #}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.subjectLine }}&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">br</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.preheaderText }}&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">br</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.slug }}&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">br</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.status }}&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">br</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.fromName }}&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">br</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.fromEmail }}&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">br</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.replyTo }}&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">br</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{# Recpient Variables</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">------------------------------------------------------------ #}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ recipient.email }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ recipient.name }}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{# Email Type Custom Fields </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   These examples may not work in your project. You will need to</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   update these examples to reference custom fields you are using.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">------------------------------------------------------------ #}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.emailBanner.one().getUrl() }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.leadText }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ email.emailFooter }}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">{# Notification Event Variables</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   These variables will depend on what event you have triggered.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   The \`entry\` variable is available for the default Entry events.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   The \`user\` variable is available for the default User events.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">------------------------------------------------------------ #}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ entry.title }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ entry.getCpEditUrl() }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ entry.customField }}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ user.email }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ user.firstName }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ user.getCpEditUrl() }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{{ user.customField }}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you don&#39;t provide a template for the Text version of your email, Sprout Email will convert your HTML email to Markdown and use that for the Text version of your email.</p></div><h2 id="developers" tabindex="-1">Developers <a class="header-anchor" href="#developers" aria-label="Permalink to &quot;Developers&quot;">​</a></h2><h3 id="custom-notification-events" tabindex="-1">Custom Notification Events <a class="header-anchor" href="#custom-notification-events" aria-label="Permalink to &quot;Custom Notification Events&quot;">​</a></h3><p>To create a custom Notification Event, extend the base <code>NotificationEvent</code> class and register your new class via <code>EVENT_REGISTER_NOTIFICATION_EVENT_TYPES</code>.</p><div class="language-php vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> BarrelStrength\\Sprout\\transactional\\notificationevents\\NotificationEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyNotificationEvent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NotificationEvent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>See related developer documentation for:</p><ul><li><a href="./audiences.html">Audiences</a></li><li><a href="./email-types.html">Email Types</a></li><li><a href="./mailers.html">Mailer Settings</a></li></ul><h2 id="settings" tabindex="-1">Settings <a class="header-anchor" href="#settings" aria-label="Permalink to &quot;Settings&quot;">​</a></h2><p>Read the <a href="/docs/craft-v5/configuration/sprout-config.html">Config Settings</a> documentation to explore and customize settings.</p><h2 id="updates" tabindex="-1">Updates <a class="header-anchor" href="#updates" aria-label="Permalink to &quot;Updates&quot;">​</a></h2><p>See <a href="/docs/craft-v5/update-guides/email.html">update guides</a> for the Transactional, Mailer, and Framework modules.</p>`,46),l=[t];function r(p,o,h,d,c,u){return i(),a("div",null,l)}const E=s(n,[["render",r]]);export{m as __pageData,E as default};
