(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{603:function(t,a,e){"use strict";e.r(a);var s=e(34),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",[t._v("Craft 3")]),t._v(" "),e("p",[t._v("Sprout SEO installation and update instructions for Craft 3.")]),t._v(" "),e("h2",{attrs:{id:"requirements"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[t._v("#")]),t._v(" Requirements")]),t._v(" "),e("ul",[e("li",[t._v("Craft CMS 3.0.0 or a more recent version of Craft")])]),t._v(" "),e("h2",{attrs:{id:"installation-via-plugin-store"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation-via-plugin-store"}},[t._v("#")]),t._v(" Installation via Plugin Store")]),t._v(" "),e("ol",[e("li",[t._v("Find the plugin in the Plugin Store in your Craft Control Panel")]),t._v(" "),e("li",[t._v("Go to "),e("em",[t._v("Settings → Plugins")]),t._v(" and select “Install”")])]),t._v(" "),e("h2",{attrs:{id:"installation-via-composer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation-via-composer"}},[t._v("#")]),t._v(" Installation via Composer")]),t._v(" "),e("div",{pre:!0},[e("ol",[e("li",[t._v("Open your terminal and go to your Craft project:"),e("br"),e("code",[t._v("cd /path/to/project")])]),t._v(" "),e("li",[t._v("Then tell Composer to load the plugin:"),e("br"),e("code",[t._v("composer require barrelstrength/sprout-seo")])]),t._v(" "),e("li",[t._v("In the Control Panel, go to "),e("em",[t._v("Settings → Plugins")]),t._v(" and select “Install”")])])]),e("h2",{attrs:{id:"upgrading-to-sprout-seo-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-to-sprout-seo-4"}},[t._v("#")]),t._v(" Upgrading to Sprout SEO 4")]),t._v(" "),e("p",[t._v("Upgrading to Sprout SEO 4 requires upgrading to Craft 3.")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("BEFORE YOU UPDATE")]),t._v(" "),e("p",[t._v("Make sure you have updated to the latest version of Sprout SEO 3.x before updating to Sprout SEO 4.x for Craft 3. The update from Sprout SEO 2 to 3 on Craft 2 was a larger update than the update from Sprout SEO 3 to 4 when migrating from Craft 2 to Craft 3. See the "),e("RouterLink",{attrs:{to:"/seo/installing-and-updating-craft-2.html#updating-to-sprout-seo-3"}},[t._v("Sprout SEO 3 upgrade documentation")]),t._v(" for more details.")],1)]),t._v(" "),e("h3",{attrs:{id:"breaking-changes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#breaking-changes"}},[t._v("#")]),t._v(" Breaking changes")]),t._v(" "),e("h4",[t._v("Sections")]),t._v(" "),e("p",[t._v("Sprout SEO 4 removes Section Metadata as it was largely not necessary and can be easily created within an existing site architecture using Singles, Channels, and the provided Metadata field. Any Section Metadata will need to be manually moved to an appropriate section and Element Metadata field.")]),t._v(" "),e("h2",{attrs:{id:"upgrading-to-sprout-seo-4-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-to-sprout-seo-4-4"}},[t._v("#")]),t._v(" Upgrading to Sprout SEO 4.4")]),t._v(" "),e("p",[t._v("Sprout SEO 4.4 updates how metadata is normalized and processed. For most users, these changes will not be noticed as metadata is generated and output in the same way. For users with custom implementations, please read below.")]),t._v(" "),e("h3",{attrs:{id:"breaking-changes-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#breaking-changes-2"}},[t._v("#")]),t._v(" Breaking changes")]),t._v(" "),e("h4",[t._v("Metadata Model")]),t._v(" "),e("div",{pre:!0},[e("p",[t._v("Retrieving metadata from the Metadata model is no longer done directly on the model. Metadata is now stored in Meta Type classes on the Metadata Model's "),e("code",[t._v("$metaTypes")]),t._v(" attribute. Values on the model represent the raw data necessary to calculate the final values. The raw data can be retrieved by calling the "),e("code",[t._v("getRawData()")]),t._v(" method. The calculated values can be retrieved by calling the "),e("code",[t._v("getMetaTagData()")]),t._v(" method.")])]),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified"}},[t._v("barrelstrength"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("sproutseo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get all the static values stored that will be used to calculate the final metadata")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRawData")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get a multi-dimensional array metadata by Meta Type with key value arrays of all calculated metadata")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetaTagData")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{pre:!0},[e("p",[t._v("Previously you could access meta attributes directly on the model. Using the updated Metadata model you will need to retrieve the calculated value by getting the metadata by type and calling the getter for the value you want to retrieve. See all Meta Types in the "),e("code",[t._v("sprout-seo/src/meta")]),t._v(" folder of the plugin.")])]),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# OLD")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$prioritizedMetadataModel")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("title")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NEW")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$searchMetaType")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$prioritizedMetadataModel")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetaTypes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'search'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$searchMetaType")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTitle")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h4",[t._v("Custom Schema")]),t._v(" "),e("p",[t._v("Several values in Custom Schema are often determined by grabbing those metadata values from the Globals or Metadata models. As the Globals and Metadata models have changed, you will want to revisit any Custom Schema and ensure your data is being retrieved and processed properly.")]),t._v(" "),e("p",[t._v("Optimized metadata values should now be retrieved using their getters:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("prioritizedMetadataModel")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# OLD")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$title")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("optimizedTitle")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$description")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("optimizedDescription")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$image")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("optimizedImage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$keywords")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("optimizedKeywords")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NEW")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$title")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOptimizedTitle")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$description")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOptimizedDescription")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$image")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOptimizedImage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$keywords")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$metadata")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOptimizedKeywords")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Previously image IDs were stored as arrays. They are now stored as the image ID as a string.")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$schema")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("globals")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'identity'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# OLD")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$imageId")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$schema")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'image'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("??")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NEW")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$imageId")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$schema")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'image'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("??")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h4",[t._v("Globals meta column")]),t._v(" "),e("div",{pre:!0},[e("p",[t._v("The "),e("code",[t._v("sproutseo_globals.meta")]),t._v(" column has been removed and Global Metadata is now calculated at the time it is needed. If you referenced the Globals::$meta column in any custom implementations, you can now just call the getter for the metadata you want from the final Metadata model.")])]),e("h2",{attrs:{id:"upgrading-to-seo-5-0-0-unreleased"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-to-seo-5-0-0-unreleased"}},[t._v("#")]),t._v(" Upgrading to SEO 5.0.0 - UNRELEASED")]),t._v(" "),e("div",{pre:!0},[e("p",[t._v("Sprout SEO 5 is a major release the includes an update to the underlying architecture. The Sprout SEO user experience will remain familiar but several conventions have changed. Most notably, the core codebase for "),e("code",[t._v("barrelstrength/sprout-seo")]),t._v(" has been moved to the "),e("code",[t._v("barrelstrength/sprout-base")]),t._v(" package so any custom code, translations, or direct links to the Sprout SEO Control Panel will need to be updated to target the new naming conventions. Plugin-specific Control Panel settings have also moved to the Craft settings area.")])]),e("div",{pre:!0},[e("div",{pre:!0,attrs:{class:"table"}},[e("table",[e("thead",[e("tr",[e("th",{pre:!0,attrs:{style:"text-align:left"}},[t._v("Feature")]),t._v(" "),e("th",{pre:!0,attrs:{style:"text-align:left"}},[t._v("Old Name")]),t._v(" "),e("th",{pre:!0,attrs:{style:"text-align:left"}},[t._v("New Name")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{pre:!0,attrs:{style:"text-align:left"}},[t._v("CP URL")]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("admin/sprout-seo")])]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("admin/sprout/seo")])])]),t._v(" "),e("tr",[e("td",{pre:!0,attrs:{style:"text-align:left"}},[t._v("Template Variables")]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("craft.sproutSeo")])]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("sprout.seo")])])]),t._v(" "),e("tr",[e("td",{pre:!0,attrs:{style:"text-align:left"}},[t._v("Translation Category")]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("sprout-seo")])]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("sprout")])])]),t._v(" "),e("tr",[e("td",{pre:!0,attrs:{style:"text-align:left"}},[t._v("Controller Namespace")]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("barrelstrength/sproutseo/controllers")])]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("barrelstrength/sproutbase/app/seo/controllers")])])]),t._v(" "),e("tr",[e("td",{pre:!0,attrs:{style:"text-align:left"}},[t._v("Service Namespace")]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("barrelstrength/sproutseo/services")])]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("barrelstrength/sproutbase/app/seo/services")])])]),t._v(" "),e("tr",[e("td",{pre:!0,attrs:{style:"text-align:left"}},[t._v("Optimize Service")]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("SproutSeo::$app->optimize")])]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("SproutBase::$app->optimizeMetadata")])])]),t._v(" "),e("tr",[e("td",{pre:!0,attrs:{style:"text-align:left"}},[t._v("Optimize Service")]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("SproutSeo::$app->schema")])]),t._v(" "),e("td",{pre:!0,attrs:{style:"text-align:left"}},[e("code",[t._v("SproutBase::$app->schemaMetadata")])])])])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);